Version 4
SHEET 1 2876 1680
WIRE 1792 -112 1680 -112
WIRE 1920 -112 1792 -112
WIRE 2032 -112 1920 -112
WIRE 2384 -112 2288 -112
WIRE 2816 -112 2384 -112
WIRE 288 -96 -16 -96
WIRE 544 -96 288 -96
WIRE 1520 -80 1296 -80
WIRE 1680 -64 1680 -112
WIRE 1792 -64 1792 -112
WIRE 288 -48 288 -96
WIRE 544 -16 544 -96
WIRE 1520 32 1520 -80
WIRE 1680 32 1680 0
WIRE 1680 32 1520 32
WIRE 1920 48 1920 -112
WIRE 2384 48 2384 -112
WIRE 288 64 288 32
WIRE -16 96 -16 -96
WIRE 1792 96 1792 0
WIRE 1792 96 1520 96
WIRE 1680 128 1680 32
WIRE 1792 128 1792 96
WIRE 544 144 544 64
WIRE 656 144 544 144
WIRE 288 192 288 144
WIRE 400 192 288 192
WIRE 544 208 544 144
WIRE 288 240 288 192
WIRE 1520 304 1520 96
WIRE 1520 304 1312 304
WIRE 1680 304 1680 192
WIRE 1792 304 1792 192
WIRE 1792 304 1680 304
WIRE 1920 304 1920 112
WIRE 1920 304 1792 304
WIRE 2160 304 2160 -16
WIRE 2160 304 1920 304
WIRE 2176 304 2160 304
WIRE 2384 304 2384 112
WIRE 2384 304 2176 304
WIRE -16 368 -16 176
WIRE 288 368 288 320
WIRE 288 368 -16 368
WIRE 544 368 544 288
WIRE 544 368 288 368
WIRE 592 576 528 576
WIRE 704 576 672 576
WIRE -272 592 -336 592
WIRE -160 592 -192 592
WIRE 400 640 352 640
WIRE 528 640 528 576
WIRE 528 640 480 640
WIRE -464 656 -528 656
WIRE -336 656 -336 592
WIRE -336 656 -384 656
WIRE 2048 656 1872 656
WIRE 592 672 592 640
WIRE 1728 672 1488 672
WIRE -272 688 -272 656
WIRE 528 688 528 640
WIRE 560 688 528 688
WIRE -336 704 -336 656
WIRE -304 704 -336 704
WIRE 704 704 704 576
WIRE 704 704 624 704
WIRE 768 704 704 704
WIRE 1952 704 1952 624
WIRE -160 720 -160 592
WIRE -160 720 -240 720
WIRE -96 720 -160 720
WIRE 368 720 352 720
WIRE 416 720 368 720
WIRE 528 720 496 720
WIRE 560 720 528 720
WIRE 1872 720 1872 656
WIRE 1920 720 1872 720
WIRE -496 736 -512 736
WIRE -448 736 -496 736
WIRE -336 736 -368 736
WIRE -304 736 -336 736
WIRE 2048 736 2048 656
WIRE 2048 736 1984 736
WIRE 2096 736 2048 736
WIRE 528 752 528 720
WIRE 1920 752 1872 752
WIRE -336 768 -336 736
WIRE 1728 768 1728 672
WIRE -336 880 -336 848
WIRE 528 880 528 832
WIRE 1728 896 1728 848
WIRE 1872 896 1872 752
WIRE 1872 896 1728 896
WIRE 1728 944 1728 896
WIRE 1728 1120 1728 1024
WIRE 432 1200 352 1200
WIRE 576 1200 512 1200
WIRE 704 1200 576 1200
WIRE -416 1216 -496 1216
WIRE -272 1216 -336 1216
WIRE -144 1216 -272 1216
WIRE 576 1248 576 1200
WIRE -272 1264 -272 1216
WIRE 1584 1360 1584 1312
WIRE 1520 1376 1520 1328
WIRE 1552 1376 1520 1376
WIRE 2288 1376 2288 1328
WIRE 1696 1392 1616 1392
WIRE 1728 1392 1696 1392
WIRE 2224 1392 2224 1344
WIRE 2256 1392 2224 1392
WIRE 1424 1408 1360 1408
WIRE 1520 1408 1504 1408
WIRE 1552 1408 1520 1408
WIRE 2400 1408 2320 1408
WIRE 2432 1408 2400 1408
WIRE 2128 1424 2064 1424
WIRE 2224 1424 2208 1424
WIRE 2256 1424 2224 1424
WIRE -272 1472 -272 1328
WIRE 576 1472 576 1312
WIRE 1520 1536 1520 1408
WIRE 1568 1536 1520 1536
WIRE 1696 1536 1696 1392
WIRE 1696 1536 1648 1536
WIRE 2224 1552 2224 1424
WIRE 2272 1552 2224 1552
WIRE 2400 1552 2400 1408
WIRE 2400 1552 2352 1552
FLAG 400 192 Vis
FLAG 656 144 Vvs
FLAG -272 656 Vdc
FLAG -496 736 Vis
FLAG -96 720 Vio
FLAG 592 640 Vdc
FLAG 368 720 Vvs
FLAG 768 704 Vvo
FLAG -496 1216 Vio
FLAG -144 1216 VIfilt
FLAG 352 1200 Vvo
FLAG 704 1200 VVfilt
FLAG 576 1472 0
FLAG -272 1472 0
FLAG 2176 304 0
FLAG -528 656 0
FLAG 352 640 0
FLAG 288 368 0
FLAG 288 -96 Vac
FLAG 1296 -80 Vac
FLAG 2816 -112 Vdc
FLAG 592 736 0
FLAG -272 752 0
FLAG 1488 672 Vdc
FLAG 1728 1120 0
FLAG 528 880 Voff
FLAG -336 880 Voff
FLAG 2096 736 Voff
FLAG 1952 768 0
FLAG 1952 624 Vdc
FLAG 1584 1424 0
FLAG 1584 1312 Vdc
FLAG 1520 1328 Voff
FLAG 1360 1408 VVfilt
FLAG 2288 1440 0
FLAG 2288 1328 Vdc
FLAG 2224 1344 Voff
FLAG 2064 1424 VIfilt
FLAG 2432 1408 VIcomp
FLAG 1728 1392 VVcomp
SYMBOL voltage -16 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 21.77 500)
SYMBOL res 272 48 R0
SYMATTR InstName Rload
SYMATTR Value 25
SYMBOL res 272 224 R0
SYMATTR InstName Rs
SYMATTR Value 0.282
SYMBOL res 528 -32 R0
SYMATTR InstName Ra
SYMATTR Value 22k
SYMBOL res 528 192 R0
SYMATTR InstName Rb
SYMATTR Value 1k
SYMBOL ind 272 -64 R0
SYMATTR InstName Lload
SYMATTR Value 4mH
SYMBOL OpAmps\\opamp2 -272 656 R0
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res -352 752 R0
SYMATTR InstName R1
SYMATTR Value 39k
SYMBOL res -352 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -176 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 39k
SYMBOL res -368 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 592 640 R0
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res 512 736 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 512 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 688 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 496 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res -320 1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL cap -288 1264 R0
SYMATTR InstName C1
SYMATTR Value 15.878n
SYMBOL res 528 1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL cap 560 1248 R0
SYMATTR InstName C2
SYMATTR Value 15.878n
SYMBOL diode 1696 0 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 1808 0 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 1696 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1808 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL cap 2368 48 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL PowerProducts\\LT1085-5 2160 -112 R0
SYMATTR InstName U3
SYMBOL cap 1904 48 R0
SYMATTR InstName C4
SYMATTR Value 47µ
SYMBOL res 1712 752 R0
SYMATTR InstName R12
SYMATTR Value 150k
SYMBOL res 1712 928 R0
SYMATTR InstName R13
SYMATTR Value 120k
SYMBOL OpAmps\\opamp2 1952 672 R0
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL OpAmps\\opamp2 1584 1328 R0
SYMATTR InstName U5
SYMATTR Value LM324
SYMBOL res 1664 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 140k
SYMBOL res 1520 1392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 2288 1344 R0
SYMATTR InstName U6
SYMATTR Value LM324
SYMBOL res 2368 1536 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 140k
SYMBOL res 2224 1408 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
TEXT -8 -176 Left 2 !.tran 0 0.5 0 0.01m
TEXT 280 -184 Left 2 ;Main circuit
TEXT -512 480 Left 2 ;Current amplification
TEXT 336 472 Left 2 ;Voltage amplification
TEXT -8 -144 Left 2 !.lib LM324.lib
TEXT 336 504 Left 2 ;A unity Gain amplifier that offsets the input voltage by 2.1V
TEXT -512 520 Left 2 ;An Amplifier with a gain of 3.9 and an offset of 2.1V
TEXT -512 1016 Left 2 ;Filter circuit to remove noise (Current)
TEXT 336 1000 Left 2 ;Filter circuit to remove noise (Voltage)
TEXT 1288 -184 Left 2 ;Creating the DC Voltage
TEXT 1288 -144 Left 2 ;Full wave rectifier with a 5V regulator to supply a constant 5V
TEXT 1440 496 Left 2 ;Offset voltage circuit
TEXT 1400 1208 Left 2 ;Comparitor circuits
TEXT 2064 1272 Left 2 ;Current
TEXT 1400 1248 Left 2 ;Voltage
TEXT 1440 552 Left 2 ;Voltage divider with a gain of 0.44 to create the offset voltage required for signal conditioning
TEXT 1928 840 Left 2 ;Opamp allows us to use the offset 'like' an ideal voltage source
TEXT 336 1048 Left 2 ;Set up to filter out frequencies above 10kHz
TEXT -512 1064 Left 2 ;Set up to filter out frequencies above 10kHz
TEXT 1392 1640 Left 2 ;Has a hysteresis region between 2.0 and 2.2, changes output when input crosses the offset Voltage
TEXT -8 -208 Left 2 !.ic V(Vdc) = 5
